/*! For license information please see tiger-connect.js.LICENSE.txt */
!function(t){function e(e){for(var r,o,i=e[0],a=e[1],c=0,l=[];c<i.length;c++)o=i[c],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&l.push(n[o][0]),n[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(s&&s(e);l.length;)l.shift()()}var r={},n={"tiger-connect":0};function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var i=new Promise((function(e,o){r=n[t]=[e,o]}));e.push(r[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(t){return o.p+"static/js/"+({}[t]||t)+".js"}(t);var s=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(l);var r=n[t];if(0!==r){if(r){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}n[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},o.m=t,o.c=r,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=(window.__sw__.assetPath + '/bundles/tigerconnect/'),o.oe=function(t){throw console.error(t),t};var i=this["webpackJsonpPlugintiger-connect"]=this["webpackJsonpPlugintiger-connect"]||[],a=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var s=a;o(o.s="kikk")}({A3Pz:function(t,e,r){Shopware.Component.override("sw-order-list",(function(){return r.e(3).then(r.bind(null,"8jjw"))})),Shopware.Component.override("sw-order-detail",(function(){return Promise.resolve().then(r.bind(null,"BdAP"))}))},BdAP:function(t,e,r){"use strict";r.r(e);e.default={template:'{% block sw_order_detail_content_tabs_documents %}\n    {% parent %}\n\n    <sw-tabs-item\n            :route="{ name: \'sw.tiger-connect.order.detail.logs\', params: { id: $route.params.id } }"\n            title="TigerConnect"\n    >\n        Tiger Connect Logs\n    </sw-tabs-item>\n{% endblock %}'}},kikk:function(t,e,r){"use strict";r.r(e);r("BdAP");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=Shopware.Component,s=Shopware.Mixin,l=Shopware.Component.getComponentHelper(),u=l.mapState,p=l.mapGetters,d=Shopware.Application,f=Shopware.Classes.ApiService;c.register("export-component-button",{template:'{% block export_component_button %}\n    <sw-button\n            variant="primary"\n            :disabled="isLoading || isProcessed"\n            @click.prevent="onExport"\n            style="float: right"\n    >\n        {{ $tc(\'tigerConnect.order.btnLabel\') }}\n    </sw-button>\n{% endblock %}',inject:["loginService"],mixins:[s.getByName("notification")],computed:i(i(i({},u("swOrderDetail",["order"])),p("swOrderDetail",["isLoading"])),{},{isProcessed:function(){var t,e;return!this.order||null!==(t=null===(e=this.order.customFields)||void 0===e?void 0:e.tiger_connect_custom_field_set_processed)&&void 0!==t&&t}}),methods:{onExport:function(){var t=this;Shopware.State.commit("swOrderDetail/setLoading",["states",!0]);var e=d.getContainer("init").httpClient,r=new f(e,this.loginService,"_action/tiger-connect"),n={Accept:"application/json",Authorization:"Bearer ".concat(this.loginService.getToken()),"Content-Type":"application/json"};r.httpClient.post(r.getApiBasePath()+"/order/export/".concat(this.order.orderNumber),{},{headers:n}).then((function(e){!0===e.data.result&&t.$router.go()})).catch((function(e){var r=null;try{r=e.response.data.errors[0].detail}catch(e){r=t.$tc("tigerConnect.order.errorMsg")}t.createNotificationError({message:r}),Shopware.State.commit("swOrderDetail/setLoading",["states",!1])}))}}});r("zJ20");var h=Object.freeze({ORDER_EXPORT:"action.tiger_connect.order.export"}),m="order";Shopware.Component.override("sw-flow-sequence-action",{methods:{openDynamicModal:function(t){if(t!==h.ORDER_EXPORT)return this.$super("openDynamicModal",t);this.addAction({name:h.ORDER_EXPORT,config:{}})},getActionTitle:function(t){return t===h.ORDER_EXPORT?{value:t,icon:"default-badge-help",label:this.$tc("order-export-action.titleOrderExport"),group:m}:this.$super("getActionTitle",t)},getActionDescriptions:function(t){return t.actionName===h.ORDER_EXPORT?this.getExportOrderDescription(t.config):this.$super("getActionDescriptions",t)},getExportOrderDescription:function(t){return this.$tc("order-export-action.descriptionTags",0,{})}}});r("A3Pz");function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new L(o||[]);return n(a,"_invoke",{value:_(t,r,c)}),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var p={};function d(){}function f(){}function h(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(E([])));b&&b!==e&&r.call(b,i)&&(m=b);var w=h.prototype=d.prototype=Object.create(m);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function o(n,i,a,c){var s=u(t[n],t,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==g(p)&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(p).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function _(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=P(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function P(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=h,n(w,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:f,configurable:!0}),f.displayName=s(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(S.prototype),s(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(w),s(w,c,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function v(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){v(i,n,o,a,c,"next",t)}function c(t){v(i,n,o,a,c,"throw",t)}a(void 0)}))}}function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _=Shopware.Mixin,P=Shopware.Data.Criteria,j=Shopware.Component.getComponentHelper(),x=j.mapState,L=j.mapGetters;Shopware.Component.register("sw-tiger-connect-order-detail-logs",{template:'<sw-card-view>\n    <template v-if="isLoading">\n        <sw-skeleton variant="detail-bold" />\n        <sw-skeleton />\n    </template>\n\n    <sw-card\n            v-else\n            :large="true"\n    >\n        <template #title>\n            <div class="sw-card__title">\n                Tiger Connect Logs\n            </div>\n        </template>\n\n        <template #subtitle>\n            <div class="sw-card__subtitle">\n                <small>\n                    ERP Order Identifier:\n                    <span v-if="order.customFields?.tiger_connect_custom_field_set_erp_order_number">{{ order.customFields.tiger_connect_custom_field_set_erp_order_number }}</span>\n                    <span v-else>N/A</span>\n                </small>\n            </div>\n        </template>\n\n        <template #toolbar>\n            <sw-button variant="ghost" @click="createdComponent"><sw-icon :small="true" name="regular-undo"></sw-icon></sw-button>\n            <export-component-button/>\n        </template>\n\n        <sw-data-grid\n                :showSelection="false"\n                :showActions="false"\n                :dataSource="logs"\n                :columns="columns">\n            <template #column-createdAt="{ item }">\n                {{ date(item.createdAt, {hour: \'2-digit\', minute: \'2-digit\', second: \'2-digit\'}) }}\n            </template>\n            <template #column-message="{ item }">\n                <a @click="showInfoModal(item)">{{ item.message }}</a>\n            </template>\n\n        </sw-data-grid>\n\n        <sw-pagination\n                :total="total"\n                :limit="limit"\n                :page="page"\n                @page-change="onPageChange"\n        ></sw-pagination>\n    </sw-card>\n\n    <sw-modal v-if="displayLog"\n              variant="large"\n              @modal-close="displayLog = null"\n    >\n\n        <template slot="modal-header">\n            <div class="sw-modal__titles">\n                <h4 class="sw-modal__title">\n                    Tiger Connect - {{ displayLog.level }}\n                </h4>\n\n                <h5 class="sw-modal__subtitle">\n                    {{ displayLog.createdAt | date({hour: \'2-digit\', minute: \'2-digit\', second: \'2-digit\'}) }}\n                </h5>\n            </div>\n\n            <button\n                    class="sw-modal__close"\n                    :title="$tc(\'global.sw-modal.labelClose\')"\n                    :aria-label="$tc(\'global.sw-modal.labelClose\')"\n                    @click="displayLog = null"\n            >\n                <sw-icon\n                        name="regular-times-s"\n                        small\n                />\n            </button>\n        </template>\n\n        <div>\n            <sw-code-editor\n                    v-if="isJson"\n                    :disabled="true"\n                    v-model="beautify"\n            />\n\n            <article v-else>{{ displayLog.message }}</article>\n        </div>\n    </sw-modal>\n</sw-card-view>',metaInfo:function(){return{title:"Tiger Connect Logs"}},inject:["repositoryFactory"],mixins:[_.getByName("listing")],data:function(){return{logs:void 0,columns:[{property:"createdAt",label:"Created"},{property:"level",label:"Level"},{property:"orderNumber",label:"Order Number"},{property:"message",label:"Message"}],total:0,limit:25,page:1,sortBy:"createdAt",sortDirection:"DESC",naturalSorting:!0,displayLog:null}},computed:O(O(O({},x("swOrderDetail",["order"])),L("swOrderDetail",["isLoading"])),{},{loggerRepository:function(){return this.repositoryFactory.create("tiger_connect_logger")},defaultCriteria:function(){var t=new P(this.page,this.limit);return this.naturalSorting="message"===this.sortBy,t.setTerm(this.term),t.addSorting(P.sort(this.sortBy,this.sortDirection,this.naturalSorting)),t.addFilter(P.equals("orderNumber",this.order.orderNumber)),t},date:function(){return Shopware.Filter.getByName("date")},beautify:function(){try{return JSON.stringify(JSON.parse(this.displayLog.message),null,4)}catch(t){return this.displayLog.message}},isJson:function(){try{return JSON.parse(this.displayLog.message),!0}catch(t){return!1}}}),created:function(){this.createdComponent()},methods:{createdComponent:function(){var t=this;return b(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.loggerRepository.search(t.defaultCriteria,Shopware.Context.api).then((function(e){t.total=e.total,t.logs=e})).catch((function(){}));case 1:case"end":return e.stop()}}),e)})))()},onPageChange:function(t){var e=this;return b(y().mark((function r(){return y().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.page=t.page,e.limit=t.limit,r.next=4,e.createdComponent();case 4:case"end":return r.stop()}}),r)})))()},showInfoModal:function(t){this.displayLog=t}}}),Shopware.Module.register("sw-tiger-connect-logging-tab",{routeMiddleware:function(t,e){var r="sw.tiger-connect.order.detail.logs";"sw.order.detail"===e.name&&e.children.every((function(t){return t.name!==r}))&&e.children.push({name:r,path:"logs",component:"sw-tiger-connect-order-detail-logs",meta:{parentPath:"sw.order.index"}}),t(e)}}),Shopware.Component.register("mail-select-config",(function(){return r.e(2).then(r.bind(null,"3m41"))})),Shopware.Component.register("line-item-type-selection",(function(){return r.e(1).then(r.bind(null,"8/vA"))}))},zJ20:function(t,e,r){Shopware.Component.override("sw-existence-filter",(function(){return r.e(0).then(r.bind(null,"kTlw"))}))}});
//# sourceMappingURL=tiger-connect.js.map